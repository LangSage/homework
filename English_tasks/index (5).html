<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Indefinite Pronouns ‚Äì Sequential Trainer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Your streak animation styles -->
  <link rel="stylesheet" href="streak-animations.css" />

  <style>
    :root {
      --bg: #020617;
      --card: #060012;
      --accent: #e879f9;
      --accent-soft: rgba(232, 121, 249, 0.18);
      --accent-strong: #f97316;
      --text: #f9fafb;
      --muted: #cbd5f5;
      --border: #312e81;
      --danger: #fecaca;
      --success: #bbf7d0;
      --radius-lg: 20px;
      --radius-md: 12px;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, #1f2937 0, transparent 55%),
        radial-gradient(circle at bottom right, #4c1d95 0, #020617 60%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .page {
      width: 100%;
      max-width: 900px;
      margin: 0 auto 40px;
    }

    .card {
      background: radial-gradient(circle at top, #1e0b3a 0, #020617 55%);
      border-radius: 26px;
      border: 1px solid rgba(129, 140, 248, 0.4);
      box-shadow:
        0 30px 80px rgba(0,0,0,0.7),
        0 0 0 1px rgba(15,23,42,0.8);
      overflow: hidden;
    }

    .card-header {
      padding: 18px 18px 12px;
      background:
        radial-gradient(circle at top left, rgba(232,121,249,0.35), transparent 55%),
        linear-gradient(135deg, rgba(15,23,42,0.9), rgba(15,23,42,0.9));
      border-bottom: 1px solid rgba(129,140,248,0.5);
    }

    .title-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      flex-wrap: wrap;
    }

    .title-main {
      font-size: 1.5rem;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 8px;
      letter-spacing: 0.02em;
    }

    .title-main span.emoji { font-size: 1.7rem; }

    .title-sub {
      font-size: 0.9rem;
      color: var(--muted);
      margin-top: 6px;
      max-width: 420px;
    }

    .badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(191,219,254,0.7);
      color: #e0f2fe;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      background: radial-gradient(circle at left, rgba(56,189,248,0.3), rgba(15,23,42,0.9));
    }

    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 12px rgba(34,197,94,0.9);
    }

    .card-body {
      padding: 16px 16px 20px;
    }

    @media (min-width: 640px) {
      .card-header { padding: 22px 24px 16px; }
      .card-body { padding: 20px 24px 24px; }
      .title-main { font-size: 1.7rem; }
    }

    .section {
      margin-bottom: 18px;
      padding: 14px 14px 16px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at top left, rgba(76,29,149,0.6), #020617);
      border: 1px solid rgba(129,140,248,0.6);
    }

    .section.alt {
      background: radial-gradient(circle at top right, rgba(248,113,113,0.55), #020617);
      border-color: rgba(248,113,113,0.7);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 8px;
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title span.icon { font-size: 1.2rem; }

    .section-tag {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .section-body {
      font-size: 0.9rem;
      color: var(--muted);
    }

    .two-col {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    @media (min-width: 640px) {
      .two-col { flex-direction: row; }
      .two-col > .field-row { flex: 1; }
    }

    .field-group {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .field-row {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .field-label {
      font-size: 0.85rem;
      color: var(--muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 4px;
    }

    .field-label span.req {
      color: var(--accent);
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
    }

    .small-hint {
      font-size: 0.7rem;
      color: #9ca3af;
    }

    input[type="text"],
    select {
      width: 100%;
      background: rgba(15,23,42,0.95);
      border-radius: var(--radius-md);
      border: 1px solid rgba(129,140,248,0.7);
      padding: 8px 10px;
      color: var(--text);
      font-size: 0.9rem;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }

    input[type="text"]:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(232,121,249,0.7);
      background: rgba(15,23,42,1);
    }

    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 6px;
    }

    .pill {
      font-size: 0.76rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(129,140,248,0.7);
      color: var(--muted);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: rgba(15,23,42,0.96);
    }

    .pill strong { color: var(--accent); font-weight: 500; }

    .quote-box {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: var(--radius-md);
      background: rgba(15,23,42,0.95);
      border: 1px dashed rgba(148,163,184,0.7);
      font-size: 0.83rem;
      color: #e5e7eb;
    }

    .quote-box em { color: #c4b5fd; }

    /* Trainer area */
    .trainer-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 0.85rem;
      color: var(--muted);
    }

    .progress-badge {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(129,140,248,0.7);
      background: rgba(15,23,42,0.96);
      font-size: 0.78rem;
    }

    .progress-bar {
      width: 100%;
      height: 6px;
      border-radius: 999px;
      background: rgba(15,23,42,0.95);
      overflow: hidden;
      margin-bottom: 10px;
    }

    .progress-inner {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #f97316, #ec4899, #38bdf8);
      transition: width 0.25s ease-out;
    }

    .question-box {
      padding: 10px;
      border-radius: var(--radius-lg);
      background: #020617;
      border: 1px solid rgba(31,41,55,0.9);
    }

    .question-text {
      font-size: 1rem;
      margin-bottom: 10px;
      color: #e5e7eb;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .option-btn {
      border-radius: 999px;
      border: 1px solid rgba(129,140,248,0.8);
      background: rgba(15,23,42,0.96);
      color: var(--muted);
      padding: 7px 10px;
      font-size: 0.9rem;
      text-align: left;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.12s ease, transform 0.08s ease, border-color 0.12s ease;
    }

    .option-btn span.bullet {
      width: 20px;
      height: 20px;
      border-radius: 999px;
      background: rgba(55,65,81,0.9);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.78rem;
      color: #e5e7eb;
      flex-shrink: 0;
    }

    .option-btn:hover {
      background: rgba(30,64,175,0.7);
      transform: translateY(-1px);
    }

    .option-btn.correct {
      border-color: #22c55e;
      background: rgba(22,163,74,0.2);
      color: #bbf7d0;
    }

    .option-btn.wrong {
      border-color: #ef4444;
      background: rgba(185,28,28,0.25);
      color: #fecaca;
    }

    .feedback {
      margin-top: 8px;
      font-size: 0.85rem;
      min-height: 1em;
    }

    .feedback.ok { color: #bbf7d0; }
    .feedback.bad { color: #fecaca; }

    .explanation-box {
      margin-top: 8px;
      padding: 7px 9px;
      border-radius: var(--radius-md);
      background: rgba(15,23,42,0.96);
      border: 1px dashed rgba(248,250,252,0.6);
      font-size: 0.82rem;
      display: flex;
      align-items: flex-start;
      gap: 6px;
    }

    .explanation-icon {
      font-size: 1.2rem;
      flex-shrink: 0;
    }

    .hidden { display: none; }

    .summary-box {
      margin-top: 10px;
      padding: 8px 10px;
      border-radius: var(--radius-md);
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(129,140,248,0.7);
      font-size: 0.85rem;
    }

    .submit-row {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: stretch;
    }

    .btn-primary {
      border: none;
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.03em;
      text-transform: uppercase;
      background: linear-gradient(135deg, #f97316, #ec4899);
      color: #0f172a;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      box-shadow: 0 12px 30px rgba(236,72,153,0.6);
    }

    .btn-primary:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }

    .btn-primary span.icon { font-size: 1.1rem; }

    .status-bar {
      font-size: 0.8rem;
      text-align: center;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.96);
      border: 1px solid rgba(129,140,248,0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      min-height: 34px;
    }

    .status-bar span.dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
    }

    .status-idle span.dot { background: rgba(148,163,184,0.9); }

    .status-sending span.dot {
      background: #f97316;
      box-shadow: 0 0 12px rgba(249,115,22,0.9);
    }

    .status-success span.dot {
      background: #22c55e;
      box-shadow: 0 0 14px rgba(34,197,94,0.9);
    }

    .status-error span.dot {
      background: #ef4444;
      box-shadow: 0 0 14px rgba(239,68,68,0.9);
    }

    .status-sending::after {
      content: "";
      width: 12px;
      height: 12px;
      border-radius: 999px;
      border: 2px solid rgba(148,163,184,0.6);
      border-top-color: #f97316;
      animation: spin 0.7s linear infinite;
    }

    @keyframes spin { to { transform: rotate(360deg); } }

    .status-text { color: var(--muted); }
    .status-success .status-text { color: var(--success); }
    .status-error .status-text { color: var(--danger); }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <div class="card-header">
        <div class="title-row">
          <div>
            <div class="title-main">
              <span class="emoji">üß†</span>
              <span>Indefinite Pronouns ‚Äì 30-Question Trainer</span>
            </div>
            <div class="title-sub">
              One question at a time. If you make a mistake, ‚ùì shows a Russian explanation. Answer all 30 correctly, then send the result to your teacher.
            </div>
          </div>
          <div class="badge">
            <span class="badge-dot"></span>
            Sequential ¬∑ Phone-friendly
          </div>
        </div>
      </div>

      <div class="card-body">
        <!-- STUDENT INFO -->
        <section class="section alt">
          <div class="section-header">
            <div class="section-title">
              <span class="icon">üë§</span>
              <span>Student info</span>
            </div>
            <div class="section-tag">Fill this before sending</div>
          </div>
          <div class="section-body">
            <div class="two-col field-group">
              <div class="field-row">
                <label class="field-label" for="studentName">
                  <span>Full name</span>
                  <span class="req">required</span>
                </label>
                <input type="text" id="studentName" placeholder="Example: Ivan Petrov" autocomplete="name" />
              </div>
              <div class="field-row">
                <label class="field-label" for="studentGroup">
                  <span>Group</span>
                  <span class="req">required</span>
                </label>
                <select id="studentGroup">
                  <option value="">Select your group</option>
                  <option>–û–ü–£.21–ê</option>
                  <option>–ü–û.22–ê</option>
                  <option>–ì–î.21–ê</option>
                  <option>–ü–û.20–ê</option>
                  <option>–û–ü–£.22.1–ê</option>
                  <option>–û–ü–£.23.1–ê</option>
                  <option>–ü–û.21–ê</option>
                  <option>–ì–î.22.1–ê</option>
                  <option>–¢–ì.24–ê</option>
                  <option>–û–ü–£.22.2–ê</option>
                  <option>–û–ü–£.23.2–ê</option>
                  <option>–ì–î.22.2–ê</option>
                  <option>–ü–û.23–ê</option>
                  <option>–¢–ì.23.2–ê</option>
                  <option>Other</option>
                </select>
              </div>
            </div>
            <p class="small-hint" style="margin-top:6px;">
              Answers are sent to the same hidden Google Form as JSON. Students stay on this page ‚Äì no Google window appears.
            </p>
          </div>
        </section>

        <!-- MINI THEORY -->
        <section class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="icon">üìö</span>
              <span>Mini theory ‚Äì indefinite pronouns</span>
            </div>
            <div class="section-tag">Short reminder in English + Russian</div>
          </div>
          <div class="section-body">
            <div class="pill-row">
              <div class="pill">
                <strong>some</strong> ‚Äì –æ–±—ã—á–Ω–æ –≤ —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω—ã—Ö
                <span>üëâ I have <strong>some</strong> friends.</span>
              </div>
              <div class="pill">
                <strong>any</strong> ‚Äì –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è
                <span>üëâ Do you have <strong>any</strong> money?</span>
              </div>
              <div class="pill">
                <strong>no</strong> ‚Äì –∑–Ω–∞—á–µ–Ω–∏–µ ¬´–Ω–µ—Ç —á–µ–≥–æ-—Ç–æ¬ª
                <span>üëâ There is <strong>no</strong> time.</span>
              </div>
            </div>
            <div class="pill-row" style="margin-top:6px;">
              <div class="pill"><strong>somebody / someone</strong> ‚Äì –∫—Ç–æ-—Ç–æ</div>
              <div class="pill"><strong>anybody / anyone</strong> ‚Äì –∫—Ç–æ-–Ω–∏–±—É–¥—å (–≤ ? / -)</div>
              <div class="pill"><strong>nobody / no one</strong> ‚Äì –Ω–∏–∫—Ç–æ</div>
              <div class="pill"><strong>everybody / everyone</strong> ‚Äì –≤—Å–µ</div>
            </div>
            <div class="pill-row" style="margin-top:6px;">
              <div class="pill"><strong>something</strong> ‚Äì —á—Ç–æ-—Ç–æ</div>
              <div class="pill"><strong>anything</strong> ‚Äì —á—Ç–æ-–Ω–∏–±—É–¥—å (–≤ ? / -)</div>
              <div class="pill"><strong>nothing</strong> ‚Äì –Ω–∏—á–µ–≥–æ</div>
              <div class="pill"><strong>everything</strong> ‚Äì –≤—Å—ë</div>
            </div>
            <div class="pill-row" style="margin-top:6px;">
              <div class="pill"><strong>somewhere</strong> ‚Äì –≥–¥–µ-—Ç–æ</div>
              <div class="pill"><strong>anywhere</strong> ‚Äì –≥–¥–µ-–Ω–∏–±—É–¥—å (–≤ ? / -)</div>
              <div class="pill"><strong>nowhere</strong> ‚Äì –Ω–∏–≥–¥–µ</div>
              <div class="pill"><strong>everywhere</strong> ‚Äì –≤—Å—é–¥—É</div>
            </div>

            <div class="quote-box">
              üí° <strong>Tip:</strong><br />
              <em>Do you want something to drink?</em> ‚Äì –≤–µ–∂–ª–∏–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Üí <strong>something</strong><br />
              <em>I don‚Äôt want anything.</em> ‚Äì –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å <strong>don‚Äôt</strong> ‚Üí <strong>anything</strong>
            </div>
          </div>
        </section>

        <!-- TRAINER -->
        <section class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="icon">üéÆ</span>
              <span>Trainer ‚Äì one question at a time</span>
            </div>
            <div class="section-tag">30 questions, all about indefinite pronouns</div>
          </div>
          <div class="section-body">
            <div class="trainer-header">
              <div id="questionCounter">Question 1 / 30</div>
              <div class="progress-badge">
                <span id="correctOnFirst">0 correct on first try</span>
              </div>
            </div>
            <div class="progress-bar">
              <div class="progress-inner" id="progressInner"></div>
            </div>

            <div class="question-box">
              <div class="question-text" id="questionText">
                <!-- question text -->
              </div>
              <div class="options" id="optionsContainer">
                <!-- options -->
              </div>
              <div class="feedback" id="feedback"></div>
              <div class="explanation-box hidden" id="explanationBox">
                <div class="explanation-icon">‚ùì</div>
                <div id="explanationText"></div>
              </div>
            </div>

            <div class="summary-box hidden" id="summaryBox">
              <strong>–û—Ç–ª–∏—á–Ω–æ!</strong> –¢—ã –æ—Ç–≤–µ—Ç–∏–ª(–∞) –Ω–∞ –≤—Å–µ 30 –≤–æ–ø—Ä–æ—Å–æ–≤. –¢–µ–ø–µ—Ä—å –º–æ–∂–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—á–∏—Ç–µ–ª—é.
              <div id="summaryStats" style="margin-top:4px;"></div>
            </div>
          </div>
        </section>

        <!-- SUBMIT -->
        <section class="section">
          <div class="section-header">
            <div class="section-title">
              <span class="icon">üì§</span>
              <span>Send your result</span>
            </div>
            <div class="section-tag">Works only after all 30 questions are correct</div>
          </div>
          <div class="section-body">
            <div class="submit-row">
              <button type="button" class="btn-primary" id="submitBtn">
                <span class="icon">üöÄ</span>
                <span>Send result to teacher</span>
              </button>
              <div class="status-bar status-idle" id="statusBar">
                <span class="dot"></span>
                <span class="status-text">
                  Finish all questions first, then send. JSON will show how many mistakes you made.
                </span>
              </div>
            </div>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- Streak animation container -->
  <div id="streak-anim-container">
    <div class="streak-bubble">
      <div class="streak-confetti"></div>
      <div id="streak-emoji" class="streak-emoji">‚≠ê</div>
      <div id="streak-text" class="streak-text">Nice! Keep going!</div>
    </div>
  </div>

  <!-- Your streak logic -->
  <script src="streak-animations.js"></script>

  <script>
    // === CONFIG: same Google Form as before ===
    const GOOGLE_FORM_ACTION =
      "https://docs.google.com/forms/d/e/1FAIpQLScNOJgyC8DP1x6Zb-QlEtAevEIgwaC8B7V58eXI3pENtmLHRQ/formResponse";

    const ENTRY_NAME_GROUP = "entry.1921741824"; // Name + group
    const ENTRY_JSON = "entry.1988412302";       // JSON payload

    // === QUESTIONS (30 total) ===
    const questions = [
      // some / any / no
      {
        text: "I have ___ friends in this city.",
        options: ["some", "any", "no"],
        correct: "some",
        explanation: "–ó–¥–µ—Å—å –æ–±—ã—á–Ω–æ–µ —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º \"some\": I have some friends in this city."
      },
      {
        text: "Do you have ___ questions?",
        options: ["some", "any", "no"],
        correct: "any",
        explanation: "–í –≤–æ–ø—Ä–æ—Å–∞—Ö –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è \"any\": Do you have any questions? ‚Äì –£ —Ç–µ–±—è –µ—Å—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –≤–æ–ø—Ä–æ—Å—ã?"
      },
      {
        text: "There isn‚Äôt ___ milk in the fridge.",
        options: ["some", "any", "no"],
        correct: "any",
        explanation: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å isn‚Äôt ‚Üí \"any\": There isn‚Äôt any milk in the fridge. ‚Äì –í —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ –Ω–µ—Ç –º–æ–ª–æ–∫–∞."
      },
      {
        text: "We don‚Äôt have ___ lessons today.",
        options: ["some", "any", "no"],
        correct: "any",
        explanation: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å don‚Äôt ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º \"any\": We don‚Äôt have any lessons today. ‚Äì –£ –Ω–∞—Å —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç —É—Ä–æ–∫–æ–≤."
      },
      {
        text: "There is ___ water in the bottle.",
        options: ["some", "any", "no"],
        correct: "some",
        explanation: "–£—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ, –≥–æ–≤–æ—Ä–∏–º \"some water\" ‚Äì –Ω–µ–º–Ω–æ–≥–æ –≤–æ–¥—ã –µ—Å—Ç—å."
      },
      {
        text: "Is there ___ sugar in your coffee?",
        options: ["some", "any", "no"],
        correct: "any",
        explanation: "–í–æ–ø—Ä–æ—Å –æ–± –æ–±—â–µ–º –Ω–∞–ª–∏—á–∏–∏ ‚Üí \"any\": Is there any sugar in your coffee?"
      },
      {
        text: "There is ___ bus to the hotel. We need a taxi.",
        options: ["some", "any", "no"],
        correct: "no",
        explanation: "\"There is no bus\" = –∞–≤—Ç–æ–±—É—Å–∞ –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ–º \"no\"."
      },

      // somebody / anybody / nobody / everybody
      {
        text: "I can‚Äôt see ___ in the room.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "anybody",
        explanation: "–í –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è—Ö –æ–±—ã—á–Ω–æ —É–ø–æ—Ç—Ä–µ–±–ª—è–µ–º \"anybody\": I can‚Äôt see anybody in the room. ‚Äì –Ø –Ω–∏–∫–æ–≥–æ –Ω–µ –≤–∏–∂—É."
      },
      {
        text: "___ is waiting for you at the reception.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "somebody",
        explanation: "\"Somebody\" ‚Äì –∫—Ç–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π, –Ω–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ –∫—Ç–æ: Somebody is waiting for you."
      },
      {
        text: "___ knows the answer.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "everybody",
        explanation: "\"Everybody\" ‚Äì –≤—Å–µ: Everybody knows the answer. ‚Äì –í—Å–µ –∑–Ω–∞—é—Ç –æ—Ç–≤–µ—Ç."
      },
      {
        text: "There was ___ in the corridor, it was completely empty.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "nobody",
        explanation: "\"Nobody\" = –Ω–∏–∫—Ç–æ: There was nobody in the corridor. ‚Äì –í –∫–æ—Ä–∏–¥–æ—Ä–µ –Ω–∏–∫–æ–≥–æ –Ω–µ –±—ã–ª–æ."
      },
      {
        text: "Is ___ here from group TG.24A?",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "anybody",
        explanation: "–í –æ–±—â–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö —á–∞—â–µ \"anybody\": Is anybody here from group TG.24A?"
      },
      {
        text: "I want to talk to ___. I feel lonely.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "somebody",
        explanation: "\"Somebody\" ‚Äì –∫—Ç–æ-—Ç–æ (–º–Ω–µ –Ω—É–∂–µ–Ω —Ö–æ—Ç—å –∫—Ç–æ-–Ω–∏–±—É–¥—å –¥–ª—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞): I want to talk to somebody."
      },
      {
        text: "___ called you, but they didn‚Äôt leave a name.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "somebody",
        explanation: "–ö—Ç–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–≤–æ–Ω–∏–ª ‚Üí \"somebody called you\"."
      },
      {
        text: "___ is perfect, everyone can make mistakes.",
        options: ["somebody", "anybody", "nobody", "everybody"],
        correct: "nobody",
        explanation: "\"Nobody is perfect\" ‚Äì –Ω–∏–∫—Ç–æ –Ω–µ –∏–¥–µ–∞–ª–µ–Ω."
      },

      // something / anything / nothing / everything
      {
        text: "Would you like ___ to drink?",
        options: ["something", "anything", "nothing", "everything"],
        correct: "something",
        explanation: "–í–µ–∂–ª–∏–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ ‚Üí –æ–±—ã—á–Ω–æ \"something\": Would you like something to drink?"
      },
      {
        text: "I didn‚Äôt buy ___ at the shop.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "anything",
        explanation: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å didn‚Äôt ‚Üí \"anything\": I didn‚Äôt buy anything at the shop."
      },
      {
        text: "There is ___ on your desk. It looks important.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "something",
        explanation: "\"Something\" ‚Äì —á—Ç–æ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ (–Ω–∞ —Å—Ç–æ–ª–µ –ª–µ–∂–∏—Ç –∫–∞–∫–∞—è-—Ç–æ –≤–µ—â—å)."
      },
      {
        text: "She lost ___ important ‚Äì her passport.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "something",
        explanation: "\"Something important\" ‚Äì —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ: She lost something important."
      },
      {
        text: "I can‚Äôt see ___ on the screen, it‚Äôs black.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "anything",
        explanation: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å can‚Äôt ‚Üí \"anything\": I can‚Äôt see anything on the screen."
      },
      {
        text: "After the exam I want to do ___ and just relax.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "nothing",
        explanation: "\"Do nothing\" ‚Äì –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å: I want to do nothing and relax."
      },
      {
        text: "He ate ___ in the fridge!",
        options: ["something", "anything", "nothing", "everything"],
        correct: "everything",
        explanation: "\"Everything\" ‚Äì –≤—Å—ë: He ate everything in the fridge."
      },
      {
        text: "Is there ___ interesting to watch on TV?",
        options: ["something", "anything", "nothing", "everything"],
        correct: "anything",
        explanation: "–í–æ–ø—Ä–æ—Å ‚Üí —á–∞—â–µ \"anything\": Is there anything interesting to watch on TV?"
      },
      {
        text: "I have ___ special for you ‚Äì a small gift.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "something",
        explanation: "\"Something special\" ‚Äì —á—Ç–æ-—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ–µ: I have something special for you."
      },
      {
        text: "We did ___ wrong, the project is great.",
        options: ["something", "anything", "nothing", "everything"],
        correct: "nothing",
        explanation: "\"We did nothing wrong\" ‚Äì –º—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ."
      },

      // somewhere / anywhere / nowhere / everywhere
      {
        text: "I can‚Äôt find my keys ___.",
        options: ["somewhere", "anywhere", "nowhere", "everywhere"],
        correct: "anywhere",
        explanation: "–û—Ç—Ä–∏—Ü–∞–Ω–∏–µ —Å can‚Äôt ‚Üí \"anywhere\": I can‚Äôt find my keys anywhere. ‚Äì –Ø –Ω–∏–≥–¥–µ –Ω–µ –º–æ–≥—É –Ω–∞–π—Ç–∏ –∫–ª—é—á–∏."
      },
      {
        text: "Let‚Äôs go ___ quiet and drink coffee.",
        options: ["somewhere", "anywhere", "nowhere", "everywhere"],
        correct: "somewhere",
        explanation: "\"Somewhere quiet\" ‚Äì –∫—É–¥–∞-–Ω–∏–±—É–¥—å –≤ —Ç–∏—Ö–æ–µ –º–µ—Å—Ç–æ."
      },
      {
        text: "There is trash ___ in the street. It looks terrible.",
        options: ["somewhere", "anywhere", "nowhere", "everywhere"],
        correct: "everywhere",
        explanation: "\"Everywhere\" ‚Äì –ø–æ–≤—Å—é–¥—É: –º—É—Å–æ—Ä –≤–µ–∑–¥–µ –Ω–∞ —É–ª–∏—Ü–µ."
      },
      {
        text: "There was ___ to sit, so we stood.",
        options: ["somewhere", "anywhere", "nowhere", "everywhere"],
        correct: "nowhere",
        explanation: "\"Nowhere\" ‚Äì –Ω–∏–≥–¥–µ: There was nowhere to sit. ‚Äì –°–µ—Å—Ç—å –±—ã–ª–æ –Ω–µ–≥–¥–µ."
      },
      {
        text: "Did you go ___ interesting on your holiday?",
        options: ["somewhere", "anywhere", "nowhere", "everywhere"],
        correct: "anywhere",
        explanation: "–í –æ–±—â–µ–º –≤–æ–ø—Ä–æ—Å–µ –æ –º–µ—Å—Ç–∞—Ö —á–∞—â–µ \"anywhere\": Did you go anywhere interesting?"
      }
    ];

    // === STATE ===
    let currentIndex = 0;
    let totalWrongAnswers = 0;
    let correctOnFirstTry = 0;
    let currentQuestionWrongTries = 0;
    let finished = false;
    let resultsSent = false;
    const results = [];

    // === DOM ===
    const questionCounter = document.getElementById("questionCounter");
    const progressInner = document.getElementById("progressInner");
    const correctOnFirstLabel = document.getElementById("correctOnFirst");
    const questionTextEl = document.getElementById("questionText");
    const optionsContainer = document.getElementById("optionsContainer");
    const feedbackEl = document.getElementById("feedback");
    const explanationBox = document.getElementById("explanationBox");
    const explanationText = document.getElementById("explanationText");
    const summaryBox = document.getElementById("summaryBox");
    const summaryStats = document.getElementById("summaryStats");
    const submitBtn = document.getElementById("submitBtn");
    const statusBar = document.getElementById("statusBar");

    function setStatus(mode, text) {
      statusBar.classList.remove("status-idle", "status-sending", "status-success", "status-error");
      statusBar.classList.add(mode);
      statusBar.querySelector(".status-text").textContent = text;
    }

    function updateProgress() {
      const total = questions.length;
      const current = Math.min(currentIndex + 1, total);
      questionCounter.textContent = `Question ${current} / ${total}`;
      const percent = (currentIndex / total) * 100;
      progressInner.style.width = percent + "%";
      correctOnFirstLabel.textContent = `${correctOnFirstTry} correct on first try`;
    }

    function clearFeedback() {
      feedbackEl.textContent = "";
      feedbackEl.classList.remove("ok", "bad");
      explanationBox.classList.add("hidden");
      explanationText.textContent = "";
    }

    function renderQuestion() {
      clearFeedback();

      if (currentIndex >= questions.length) {
        // All done
        finished = true;
        progressInner.style.width = "100%";
        questionCounter.textContent = `Question ${questions.length} / ${questions.length}`;
        questionTextEl.textContent = "‚úÖ All 30 questions are completed!";
        optionsContainer.innerHTML = "";
        summaryBox.classList.remove("hidden");
        summaryStats.textContent =
          `–û—à–∏–±–æ–∫: ${totalWrongAnswers}. –° –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ: ${correctOnFirstTry} –∏–∑ ${questions.length}.`;
        setStatus("status-success", "–¢—ã –∑–∞–∫–æ–Ω—á–∏–ª(–∞) —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É—á–∏—Ç–µ–ª—é.");
        if (window.Streak && typeof Streak.correct === "function") {
          Streak.correct();
        }
        return;
      }

      const q = questions[currentIndex];
      questionTextEl.textContent = q.text;
      optionsContainer.innerHTML = "";
      summaryBox.classList.add("hidden");

      q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "option-btn";
        btn.dataset.value = opt.toLowerCase();

        const bullet = document.createElement("span");
        bullet.className = "bullet";
        bullet.textContent = String.fromCharCode(65 + idx); // A,B,C,D...

        const text = document.createElement("span");
        text.textContent = opt;

        btn.appendChild(bullet);
        btn.appendChild(text);

        btn.addEventListener("click", () => handleAnswer(opt.toLowerCase(), btn));

        optionsContainer.appendChild(btn);
      });

      updateProgress();
      currentQuestionWrongTries = 0;
    }

    function handleAnswer(selected, btnEl) {
      if (currentIndex >= questions.length) return;

      const q = questions[currentIndex];
      const isCorrect = selected === q.correct.toLowerCase();

      // Reset option button styles
      Array.from(optionsContainer.querySelectorAll(".option-btn")).forEach(b => {
        b.classList.remove("correct", "wrong");
      });

      if (isCorrect) {
        if (currentQuestionWrongTries === 0) {
          correctOnFirstTry += 1;
        }
        feedbackEl.textContent = "‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ!";
        feedbackEl.classList.remove("bad");
        feedbackEl.classList.add("ok");
        explanationBox.classList.add("hidden");
        explanationText.textContent = "";

        btnEl.classList.add("correct");

        if (window.Streak && typeof Streak.correct === "function") {
          Streak.correct();
        }

        // Save result for this question
        results.push({
          index: currentIndex + 1,
          question: q.text,
          options: q.options,
          correct: q.correct,
          finalAnswer: selected,
          wrongTries: currentQuestionWrongTries
        });

        currentIndex += 1;

        setTimeout(() => {
          renderQuestion();
        }, 700);
      } else {
        totalWrongAnswers += 1;
        currentQuestionWrongTries += 1;

        feedbackEl.textContent = "‚ùå –ü–æ–∫–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ—Å–º–æ—Ç—Ä–∏ –ø–æ–¥—Å–∫–∞–∑–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑.";
        feedbackEl.classList.remove("ok");
        feedbackEl.classList.add("bad");

        btnEl.classList.add("wrong");
        explanationText.textContent = q.explanation;
        explanationBox.classList.remove("hidden");

        if (window.Streak && typeof Streak.wrong === "function") {
          Streak.wrong();
        }
      }
    }

    function collectPayload() {
      const name = document.getElementById("studentName").value.trim();
      const group = document.getElementById("studentGroup").value.trim();

      return {
        name,
        group,
        payload: {
          meta: {
            trainer: "indefinite_pronouns_sequential",
            timestamp: new Date().toISOString(),
            totalQuestions: questions.length,
            totalWrongAnswers: totalWrongAnswers,
            correctOnFirstTry: correctOnFirstTry
          },
          student: {
            name,
            group
          },
          results
        }
      };
    }

    async function sendToGoogleForm() {
      if (!finished) {
        setStatus("status-error", "–°–Ω–∞—á–∞–ª–∞ –æ—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ –≤—Å–µ 30 –≤–æ–ø—Ä–æ—Å–æ–≤. –ü–æ—Ç–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.");
        return;
      }

      if (resultsSent) {
        setStatus("status-success", "–†–µ–∑—É–ª—å—Ç–∞—Ç —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—á–∏—Ç–µ–ª—é.");
        return;
      }

      const { name, group, payload } = collectPayload();

      if (!name || !group) {
        setStatus("status-error", "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–ø–∏—à–∏ —Å–≤–æ—ë –∏–º—è –∏ –≥—Ä—É–ø–ø—É –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.");
        return;
      }

      const nameGroup = `${name} ${group}`;
      const jsonText = JSON.stringify(payload, null, 2);

      const formData = new FormData();
      formData.append(ENTRY_NAME_GROUP, nameGroup);
      formData.append(ENTRY_JSON, jsonText);

      try {
        setStatus("status-sending", "–û—Ç–ø—Ä–∞–≤–ª—è—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç‚Ä¶");
        submitBtn.disabled = true;

        await fetch(GOOGLE_FORM_ACTION, {
          method: "POST",
          mode: "no-cors",
          body: formData
        });

        resultsSent = true;
        setStatus("status-success", "–ì–æ—Ç–æ–≤–æ! –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω —É—á–∏—Ç–µ–ª—é.");
      } catch (err) {
        console.error("Error sending to Google Form:", err);
        setStatus("status-error", "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ. –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑ –∏–ª–∏ —Å–¥–µ–ª–∞–π —Å–∫—Ä–∏–Ω—à–æ—Ç –¥–ª—è —É—á–∏—Ç–µ–ª—è.");
        submitBtn.disabled = false;
      }
    }

    submitBtn.addEventListener("click", () => {
      sendToGoogleForm();
    });

    // Start
    renderQuestion();
    setStatus(
      "status-idle",
      "–û—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏. –ö–æ–≥–¥–∞ –≤—Å–µ 30 –±—É–¥—É—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç."
    );
  </script>
</body>
</html>
